<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Legend | Game & Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --neon-blue: #00f2ff;
            --neon-purple: #bc13fe;
            --dark-bg: #050505;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Roboto', sans-serif; background-color: var(--dark-bg); color: #fff; overflow-x: hidden; }
        h1, .logo, .btn-main { font-family: 'Orbitron', sans-serif; }

        /* --- GIAO DIỆN TRANG CHỦ --- */
        #homepage { transition: opacity 0.5s ease; }

        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 5%; background: rgba(0, 0, 0, 0.9);
            position: fixed; width: 100%; top: 0; z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo { font-size: 24px; font-weight: 900; background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .hero {
            height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.4), var(--dark-bg)),
                        url('https://images.unsplash.com/photo-1614027126211-175f3363e17f?q=80&w=1920&auto=format&fit=crop');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
        }

        .hero h1 { font-size: clamp(2rem, 8vw, 5rem); text-shadow: 0 0 20px var(--neon-purple); margin-bottom: 20px; }

        .btn-main {
            padding: 18px 50px; background: transparent; color: white;
            border: 2px solid var(--neon-blue); text-decoration: none;
            font-weight: bold; cursor: pointer; transition: 0.4s;
        }

        .btn-main:hover { background: var(--neon-blue); box-shadow: 0 0 30px var(--neon-blue); color: #000; }

        /* --- GIAO DIỆN GAME --- */
        #game-container {
            display: none; /* Mặc định ẩn */
            flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; background: #000;
        }

        canvas { border: 2px solid var(--neon-purple); box-shadow: 0 0 20px var(--neon-purple); background: #000; max-width: 90vw; }
        
        .game-ui { margin-bottom: 15px; text-align: center; }
        .btn-exit { margin-top: 15px; padding: 10px 20px; background: #333; color: #fff; border: none; cursor: pointer; font-family: 'Orbitron'; }
    </style>
</head>
<body>

    <div id="homepage">
        <nav>
            <div class="logo">CYBER LEGEND</div>
        </nav>

        <header class="hero">
            <h1>UNLEASH POWER</h1>
            <p style="margin-bottom: 40px; letter-spacing: 2px;">BẤM NÚT DƯỚI ĐỂ BẮT ĐẦU TRẢI NGHIỆM</p>
            <button class="btn-main" onclick="switchToGame()">VÀO GAME NGAY</button>
        </header>
    </div>

    <div id="game-container">
        <div class="game-ui">
            <h2 style="color: var(--neon-blue); font-family: 'Orbitron';">CYBER DODGE</h2>
            <p>Điểm: <span id="score">0</span></p>
        </div>
        <canvas id="gameCanvas"></canvas>
        <button class="btn-exit" onclick="location.reload()">THOÁT RA TRANG CHỦ</button>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        let score = 0;
        let gameActive = false;
        let enemies = [];
        let player = { x: 190, y: 460, width: 25, height: 25 };

        function switchToGame() {
            document.getElementById('homepage').style.display = 'none';
            document.getElementById('game-container').style.display = 'flex';
            canvas.width = 400;
            canvas.height = 500;
            gameActive = true;
            initGame();
        }

        // Điều khiển chuột/cảm ứng
        canvas.addEventListener("mousemove", (e) => {
            const rect = canvas.getBoundingClientRect();
            player.x = e.clientX - rect.left - player.width / 2;
        });

        function initGame() {
            if (!gameActive) return;

            // Xử lý Logic
            if (Math.random() < 0.05) {
                enemies.push({
                    x: Math.random() * (canvas.width - 30),
                    y: -30,
                    size: Math.random() * 20 + 15,
                    speed: Math.random() * 3 + 2
                });
            }

            for (let i = 0; i < enemies.length; i++) {
                enemies[i].y += enemies[i].speed;
                // Check va chạm
                if (player.x < enemies[i].x + enemies[i].size &&
                    player.x + player.width > enemies[i].x &&
                    player.y < enemies[i].y + enemies[i].size &&
                    player.y + player.height > enemies[i].size) {
                    alert("GAME OVER! Điểm: " + score);
                    location.reload();
                }
                // Tính điểm
                if (enemies[i].y > canvas.height) {
                    enemies.splice(i, 1);
                    score++;
                    document.getElementById("score").innerText = score;
                }
            }

            // Vẽ đồ họa
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Vẽ người chơi
            ctx.fillStyle = "#00f2ff";
            ctx.shadowBlur = 15; ctx.shadowColor = "#00f2ff";
            ctx.fillRect(player.x, player.y, player.width, player.height);

            // Vẽ địch
            ctx.fillStyle = "#ff0055";
            ctx.shadowBlur = 10; ctx.shadowColor = "#ff0055";
            enemies.forEach(e => ctx.fillRect(e.x, e.y, e.size, e.size));

            requestAnimationFrame(initGame);
        }
    </script>
</body>
</html>
